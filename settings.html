<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuizForge - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app">
    
    <!-- Header -->
    <header class="settings-header">
      <button class="btn-back" onclick="window.location.href='index.html'">
        ‚Üê –ù–∞–∑–∞–¥ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É
      </button>
      <div>
        <h1>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h1>
        <p class="muted">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–º —Ç–∞ –¥–∞–Ω–∏–º–∏</p>
      </div>
    </header>
    
    <!-- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è -->
    <div class="settings-container">
      
      <!-- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏–º–∏ -->
      <section class="settings-section">
        <h2>üíæ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏–º–∏</h2>
        
        <div class="settings-item">
          <div class="settings-item-info">
            <h3>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ</h3>
            <p class="muted">–°–∫—ñ–ª—å–∫–∏ –º—ñ—Å—Ü—è –∑–∞–π–º–∞—é—Ç—å –≤–∞—à—ñ –¥–∞–Ω—ñ</p>
          </div>
          <div class="settings-item-value">
            <div id="storageUsage" class="storage-info">
              <!-- JS –∑–∞–ø–æ–≤–Ω–∏—Ç—å -->
            </div>
          </div>
        </div>
        
        <div class="settings-item">
          <div class="settings-item-info">
            <h3>–ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö</h3>
            <p class="muted">–ó–±–µ—Ä–µ–∂—ñ—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É —Ñ–∞–π–ª JSON</p>
          </div>
          <div class="settings-item-action">
            <button class="btn-primary" id="exportBtn">
              üì• –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
            </button>
          </div>
        </div>
        
        <div class="settings-item">
          <div class="settings-item-info">
            <h3>–Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö</h3>
            <p class="muted">–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–±–µ—Ä–µ–∂–µ–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑ —Ñ–∞–π–ª—É</p>
          </div>
          <div class="settings-item-action">
            <input 
              type="file" 
              id="importFile" 
              accept=".json" 
              style="display: none;"
            />
            <button class="btn-primary" id="importBtn">
              üì§ –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
            </button>
          </div>
        </div>
        
        <div class="settings-item danger">
          <div class="settings-item-info">
            <h3>–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é</h3>
            <p class="muted">‚ö†Ô∏è –í–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤. –ù–µ –º–æ–∂–Ω–∞ —Å–∫–∞—Å—É–≤–∞—Ç–∏!</p>
          </div>
          <div class="settings-item-action">
            <button class="btn-ghost btn-danger" id="clearAllBtn">
              üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ
            </button>
          </div>
        </div>
      </section>
      
      <!-- –ü—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É -->
      <section class="settings-section">
        <h2>‚ÑπÔ∏è –ü—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É</h2>
        
        <div class="about-grid">
          <div class="about-item">
            <div class="about-label">–ù–∞–∑–≤–∞</div>
            <div class="about-value">QuizForge</div>
          </div>
          
          <div class="about-item">
            <div class="about-label">–í–µ—Ä—Å—ñ—è</div>
            <div class="about-value">0.3.0</div>
          </div>
          
          <div class="about-item">
            <div class="about-label">–î–∞—Ç–∞ —Ä–µ–ª—ñ–∑—É</div>
            <div class="about-value">18 –∂–æ–≤—Ç–Ω—è 2025</div>
          </div>
          
          <div class="about-item">
            <div class="about-label">–†–æ–∑—Ä–æ–±–Ω–∏–∫</div>
            <div class="about-value">–°–Ü–ì–°–ü–ü –º–æ–ª–æ–¥—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç –í–æ–π—Ç–æ–≤–∏—á –Ñ–≤–≥–µ–Ω</div>
          </div>
          
          <div class="about-item">
            <div class="about-label">–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó</div>
            <div class="about-value">HTML5, CSS3, Vanilla JavaScript (ES6+)</div>
          </div>
          
          <div class="about-item">
            <div class="about-label">–õ—ñ—Ü–µ–Ω–∑—ñ—è</div>
            <div class="about-value">MIT License</div>
          </div>
        </div>
        
        <div class="about-description">
          <p><strong>QuizForge</strong> - –º–æ–¥—É–ª—å–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.</p>
          <p class="muted">–ü—Ä–∞—Ü—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—Ñ–ª–∞–π–Ω. –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–∞–º'—è—Ç—ñ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–µ–º–∞—î –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p>
        </div>
        
        <div class="about-links">
          <a href="https://github.com" target="_blank" class="btn-ghost">
            üåê GitHub
          </a>
          <button class="btn-ghost" id="changelogBtn">
            üìã Changelog
          </button>
        </div>
      </section>
      
    </div>
    
  </div>
  
  <!-- Modal –¥–ª—è Changelog -->
  <div id="changelogModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>üìã Changelog</h2>
        <button class="modal-close" onclick="closeModal()">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="changelog-entry">
          <h3>v0.3.0 <span class="badge badge-accent">–ü–æ—Ç–æ—á–Ω–∞</span></h3>
          <p class="muted">18 –∂–æ–≤—Ç–Ω—è 2025</p>
          <ul>
            <li>‚úÖ –ü–æ–≤–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑ –ø–ª–∞–≥—ñ–Ω–∞–º–∏</li>
            <li>‚úÖ –ü–ª–∞–≥—ñ–Ω Multiple Choice (–≤–∏–±—ñ—Ä –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤)</li>
            <li>‚úÖ –î–∏–Ω–∞–º—ñ—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Ä–µ–∂–∏–º—ñ–≤</li>
            <li>‚úÖ –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</li>
            <li>‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏</li>
            <li>‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏–º–∏</li>
            <li>‚úÖ 100 –ø–∏—Ç–∞–Ω—å –¥–ª—è —Ç–µ—Å—Ç—É "–ö—É—Ä—Å –ª—ñ–¥–µ—Ä—Å—Ç–≤–∞"</li>
            <li>‚úÖ Responsive –¥–∏–∑–∞–π–Ω</li>
          </ul>
        </div>
        
        <div class="changelog-entry">
          <h3>v0.2.0</h3>
          <p class="muted">–ü–æ–ø–µ—Ä–µ–¥–Ω—è –≤–µ—Ä—Å—ñ—è</p>
          <ul>
            <li>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏</li>
            <li>–ü–µ—Ä–µ—Ö—ñ–¥ –∑ –æ–¥–Ω–æ—Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è</li>
          </ul>
        </div>
        
        <div class="changelog-entry">
          <h3>v0.1.4</h3>
          <p class="muted">–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è</p>
          <ul>
            <li>–û–¥–Ω–æ—Ñ–∞–π–ª–æ–≤–∏–π HTML –¥–æ–¥–∞—Ç–æ–∫</li>
            <li>–ë–∞–∑–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ -->
  <script type="module">
    import analytics from './js/analytics.js';
    
    // –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
    function displayStorageUsage() {
      const storage = analytics.getStorageSize();
      const container = document.getElementById('storageUsage');
      
      const color = storage.percentage > 80 
        ? 'var(--accent-red)' 
        : storage.percentage > 50 
          ? 'var(--accent-yellow)' 
          : 'var(--accent-green)';
      
      container.innerHTML = `
        <div class="storage-bar">
          <div class="storage-fill" style="width: ${storage.percentage}%; background: ${color};"></div>
        </div>
        <div class="storage-text">
          <strong>${storage.usedKB} KB</strong> –∑ ${storage.limitMB} MB (${storage.percentage}%)
        </div>
      `;
    }
    
    // –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö
    document.getElementById('exportBtn').addEventListener('click', () => {
      try {
        const data = analytics.exportData();
        const json = JSON.stringify(data, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = `quizforge-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        alert('‚úÖ –î–∞–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ!');
      } catch (e) {
        console.error('Export failed:', e);
        alert('‚ùå –ü–æ–º–∏–ª–∫–∞ –µ–∫—Å–ø–æ—Ä—Ç—É: ' + e.message);
      }
    });
    
    // –Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö
    document.getElementById('importBtn').addEventListener('click', () => {
      document.getElementById('importFile').click();
    });
    
    document.getElementById('importFile').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (event) => {
        try {
          const data = JSON.parse(event.target.result);
          const success = analytics.importData(data);
          
          if (success) {
            alert('‚úÖ –î–∞–Ω—ñ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ!');
            displayStorageUsage();
          } else {
            alert('‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–º–ø–æ—Ä—Ç—É –¥–∞–Ω–∏—Ö');
          }
        } catch (e) {
          console.error('Import failed:', e);
          alert('‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–º–ø–æ—Ä—Ç—É: ' + e.message);
        }
      };
      reader.readAsText(file);
    });
    
    // –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é
    document.getElementById('clearAllBtn').addEventListener('click', () => {
      const confirmed = confirm(
        '‚ö†Ô∏è –£–í–ê–ì–ê!\n\n' +
        '–í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –í–°–Æ —ñ—Å—Ç–æ—Ä—ñ—é –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω—å?\n\n' +
        '‚Ä¢ –í—Å—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤ –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ\n' +
        '‚Ä¢ –í—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ\n' +
        '‚Ä¢ –¶—é –¥—ñ—é –Ω–µ –º–æ–∂–Ω–∞ —Å–∫–∞—Å—É–≤–∞—Ç–∏!\n\n' +
        '–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ —Å–ø–æ—á–∞—Ç–∫—É –∑—Ä–æ–±–∏—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö.'
      );
      
      if (!confirmed) return;
      
      const doubleCheck = confirm('–í–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤–ø–µ–≤–Ω–µ–Ω—ñ? –¶–µ –æ—Å—Ç–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞.');
      
      if (!doubleCheck) return;
      
      analytics.clearAllHistory();
      displayStorageUsage();
      
      alert('‚úÖ –í—Å—é —ñ—Å—Ç–æ—Ä—ñ—é –≤–∏–¥–∞–ª–µ–Ω–æ!');
    });
    
    // –ü–æ–∫–∞–∑–∞—Ç–∏ Changelog
    document.getElementById('changelogBtn').addEventListener('click', () => {
      document.getElementById('changelogModal').classList.remove('hidden');
    });
    
    window.closeModal = function() {
      document.getElementById('changelogModal').classList.add('hidden');
    };
    
    // –ó–∞–∫—Ä–∏—Ç–∏ modal –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ —Ñ–æ–Ω
    document.getElementById('changelogModal').addEventListener('click', (e) => {
      if (e.target.id === 'changelogModal') {
        closeModal();
      }
    });
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    window.addEventListener('DOMContentLoaded', () => {
      displayStorageUsage();
    });
  </script>
</body>
</html>
