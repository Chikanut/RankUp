<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuizForge - –ö–∞—Ç–∞–ª–æ–≥ —Ç–µ—Å—Ç—ñ–≤</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app">
    
    <!-- Header -->
    <header class="main-header">
      <div class="header-content">
        <div class="header-left">
          <h1>üéØ QuizForge</h1>
          <p class="tagline">–ú–æ–¥—É–ª—å–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è</p>
        </div>
        <div class="header-right">
          <button class="btn-ghost" id="statsBtn">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
          <button class="btn-ghost" id="settingsBtn">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
        </div>
      </div>
    </header>
    
    <!-- Filters -->
    <div class="filters-section">
      <div class="search-box">
        <input 
          type="text" 
          id="searchInput" 
          placeholder="üîç –ü–æ—à—É–∫ —Ç–µ—Å—Ç—ñ–≤..." 
          class="search-input"
        />
      </div>
      
      <div class="filters-row">
        <div class="filter-group">
          <label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
          <select id="categoryFilter" class="filter-select">
            <option value="">–í—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:</label>
          <select id="difficultyFilter" class="filter-select">
            <option value="">–í—Å—ñ —Ä—ñ–≤–Ω—ñ</option>
            <option value="easy">–õ–µ–≥–∫–æ</option>
            <option value="medium">–°–µ—Ä–µ–¥–Ω—å–æ</option>
            <option value="hard">–°–∫–ª–∞–¥–Ω–æ</option>
          </select>
        </div>
        
        <button class="btn-ghost" id="clearFilters">–°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
      </div>
    </div>
    
    <!-- Tests Grid -->
    <div id="testsGrid" class="tests-grid">
      <!-- –ö–∞—Ä—Ç–∫–∏ —Ç–µ—Å—Ç—ñ–≤ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è JS -->
    </div>
    
    <!-- Footer -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-left">
          <p>QuizForge v0.4.5</p>
          <p class="muted">–†–æ–∑—Ä–æ–±–Ω–∏–∫: –°–Ü–ì–°–ü–ü –í–ü–§ –î–®–í 199 –ù–¶ –º–æ–ª–æ–¥—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç –í–æ–π—Ç–æ–≤–∏—á –Ñ–≤–≥–µ–Ω</p>
        </div>
        <div class="footer-right">
          <p class="muted">–ü—Ä–∞—Ü—é—î –æ—Ñ–ª–∞–π–Ω ‚Ä¢ –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ</p>
        </div>
      </div>
    </footer>
    
  </div>
  
  <!-- Loading screen -->
  <div id="loading" class="loading-screen">
    <div class="loading-spinner"></div>
    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—É...</p>
  </div>
  
  <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ -->
  <script type="module">
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥ —Ç–µ—Å—Ç—ñ–≤
    let config = null;
    
    async function loadConfig() {
      const response = await fetch('data/tests.json');
      config = await response.json();
      return config;
    }
    
    // –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ–∫ —Ç–µ—Å—Ç—ñ–≤
    function renderTests(tests) {
      const grid = document.getElementById('testsGrid');
      
      if (tests.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <h3>–¢–µ—Å—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h3>
            <p class="muted">–°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = tests.map(test => `
        <div class="test-card" data-test-id="${test.id}">
          <div class="test-icon">${test.icon}</div>
          <h3 class="test-title">${test.title}</h3>
          <p class="test-description">${test.description}</p>
          
          <div class="test-meta">
            <span class="badge">${test.totalQuestions} –ø–∏—Ç–∞–Ω—å</span>
            <span class="badge">${test.estimatedTime}</span>
            <span class="badge badge-${test.difficulty}">${getDifficultyText(test.difficulty)}</span>
          </div>
          
          <div class="test-tags">
            ${test.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
          </div>
          
          <button class="btn-primary btn-block" onclick="startTest('${test.id}')">
            –ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç ‚Üí
          </button>
        </div>
      `).join('');
    }
    
    function getDifficultyText(difficulty) {
      const map = {
        'easy': '–õ–µ–≥–∫–æ',
        'medium': '–°–µ—Ä–µ–¥–Ω—å–æ',
        'hard': '–°–∫–ª–∞–¥–Ω–æ'
      };
      return map[difficulty] || difficulty;
    }
    
    // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤
    function filterTests() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const category = document.getElementById('categoryFilter').value;
      const difficulty = document.getElementById('difficultyFilter').value;
      
      let filtered = config.tests.filter(test => test.enabled);
      
      // –ü–æ—à—É–∫
      if (searchTerm) {
        filtered = filtered.filter(test =>
          test.title.toLowerCase().includes(searchTerm) ||
          test.description.toLowerCase().includes(searchTerm) ||
          test.tags.some(tag => tag.toLowerCase().includes(searchTerm))
        );
      }
      
      // –ö–∞—Ç–µ–≥–æ—Ä—ñ—è
      if (category) {
        filtered = filtered.filter(test => test.category === category);
      }
      
      // –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å
      if (difficulty) {
        filtered = filtered.filter(test => test.difficulty === difficulty);
      }
      
      renderTests(filtered);
    }
    
    // –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    function populateFilters() {
      const categoryFilter = document.getElementById('categoryFilter');
      
      config.categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat.id;
        option.textContent = `${cat.icon} ${cat.name}`;
        categoryFilter.appendChild(option);
      });
    }
    
    // –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
    window.startTest = function(testId) {
      window.location.href = `quiz.html?test=${testId}`;
    };
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    window.addEventListener('DOMContentLoaded', async () => {
      try {
        await loadConfig();
        populateFilters();
        renderTests(config.tests.filter(t => t.enabled));
        
        // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
        document.getElementById('searchInput').addEventListener('input', filterTests);
        document.getElementById('categoryFilter').addEventListener('change', filterTests);
        document.getElementById('difficultyFilter').addEventListener('change', filterTests);
        
        document.getElementById('clearFilters').addEventListener('click', () => {
          document.getElementById('searchInput').value = '';
          document.getElementById('categoryFilter').value = '';
          document.getElementById('difficultyFilter').value = '';
          filterTests();
        });
        
        document.getElementById('statsBtn').addEventListener('click', () => {
          window.location.href = 'stats.html';
        });
        
        document.getElementById('settingsBtn').addEventListener('click', () => {
          window.location.href = 'settings.html';
        });
        
        // –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ loading
        document.getElementById('loading').style.display = 'none';
        
      } catch (error) {
        console.error('Failed to load:', error);
        document.getElementById('loading').innerHTML = `
          <div class="error-icon">‚ùå</div>
          <p>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</p>
          <p class="muted">${error.message}</p>
        `;
      }
    });
  </script>
</body>
</html>
